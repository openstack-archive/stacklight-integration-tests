# Contents

- **rootCA.key** is the key used to self-signed rootCA.pem
- **rootCA.pem** is the certificate that will act as the **StackLight Root Authority**

The certificate has the following informations:
```
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 11145407723752527550 (0x9aac71461b2a16be)
    Signature Algorithm: sha256WithRSAEncryption
        Issuer: C=FR, ST=Rhone-Alpes, L=Grenoble, O=Mirantis, OU=StackLight, CN=StackLight Root Authority/emailAddress=mirantis@example.com
        Validity
            Not Before: Jun 20 12:27:36 2016 GMT
            Not After : Apr 10 12:27:36 2019 GMT
        Subject: C=FR, ST=Rhone-Alpes, L=Grenoble, O=Mirantis, OU=StackLight, CN=StackLight Root Authority/emailAddress=mirantis@example.com
```

# Client settings

To be able to validate certificate generated by the **StackLight Root
Authority** you need to download it into your web browser or pass it to
the client by using the correct option.

# Create a certificate for a plugin and sign it

1. Generate the key for the plugin
```
openssl genrsa -out <plugin-name>.key 2048
```

1. Create the certificate signing request
```
openssl req -new -key <plugin-name>.key -out <plugin-name>.csr
```
Here is an example on how to fill the fields for the grafana plugin where
the choosen FQDN is _grafana.fuel.local_:
```
Country Name (2 letter code) [AU]:FR
State or Province Name (full name) [Some-State]:Rhone-Alpes
Locality Name (eg, city) []:Grenoble
Organization Name (eg, company) [Internet Widgits Pty Ltd]:Mirantis
Organizational Unit Name (eg, section) []:Fuel plugins
Common Name (e.g. server FQDN or YOUR name) []:grafana.fuel.local
Email Address []:mirantis@example.com
Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
```
For _challenge password_ and _optional company_ just press enter.

1. And now sign it with the CA root key
```
openssl x509 -req -in <plugin-name>.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out <plugin-name>.crt -days 500 -sha256
```

1. You can now generate the file that will be used in the Fuel UI to set up
the HTTPS communication for the plugin by concatenating the certificate and
the plugin private key.
```
cat <plugin-name>.crt <plugin-name>.key > <plugin-name>.pem
```

The file **< plugin-name >.pem** can be passed to the Fuel UI as a valid
certificate that has been signed by the **StackLight Root Authority**.

